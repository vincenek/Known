<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNOWN - Professional Web Intelligence</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #172a45;
            --accent: #64ffda;
            --light: #e6f1ff;
            --dark: #020c1b;
            --card-bg: rgba(23, 42, 69, 0.7);
            --success: #2ecc71;
            --warning: #f39c12;
            --error: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        header {
            background: rgba(2, 12, 27, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent) 0%, #52e0c4 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.4);
        }
        
        .logo-icon i {
            color: var(--dark);
            font-size: 22px;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            background: linear-gradient(to right, var(--accent), #52e0c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo-text span {
            font-size: 0.8rem;
            color: var(--accent);
            letter-spacing: 1px;
        }
        
        .header-actions {
            display: flex;
            gap: 12px;
        }
        
        .header-btn {
            width: 42px;
            height: 42px;
            border-radius: 10px;
            background: rgba(23, 42, 69, 0.7);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .header-btn:hover {
            background: var(--accent);
            color: var(--dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.3);
        }
        
        .header-btn .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--success);
            color: var(--dark);
            font-size: 0.7rem;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            padding: 20px;
            gap: 20px;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }
        
        .sidebar {
            width: 320px;
            background: rgba(2, 12, 27, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(100, 255, 218, 0.1);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .input-group {
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .input-group h2 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .input-group h2 i {
            font-size: 1.2rem;
        }
        
        .url-input {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .url-input input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(23, 42, 69, 0.7);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 12px;
            color: var(--light);
            font-size: 1rem;
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }
        
        .url-input input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.3);
        }
        
        .url-input button {
            background: linear-gradient(135deg, var(--accent) 0%, #52e0c4 100%);
            color: var(--dark);
            border: none;
            border-radius: 12px;
            padding: 14px 20px;
            font-weight: 600;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 20px rgba(100, 255, 218, 0.3);
        }
        
        .url-input button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(100, 255, 218, 0.4);
        }
        
        .history {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .history-actions {
            display: flex;
            gap: 10px;
        }
        
        .history-btn {
            padding: 8px 14px;
            background: rgba(23, 42, 69, 0.7);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 8px;
            color: var(--accent);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .history-btn:hover {
            background: var(--accent);
            color: var(--dark);
        }
        
        .history-list {
            list-style: none;
            flex: 1;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 16px;
            background: rgba(23, 42, 69, 0.3);
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
            backdrop-filter: blur(5px);
        }
        
        .history-item:hover {
            background: rgba(23, 42, 69, 0.5);
            border-left-color: var(--accent);
            transform: translateX(5px);
        }
        
        .history-item.active {
            border-left-color: var(--accent);
            background: rgba(23, 42, 69, 0.7);
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }
        
        .history-item .url {
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 6px;
            font-size: 1rem;
            color: var(--accent);
        }
        
        .history-item .title {
            font-size: 0.95rem;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .history-item .date {
            font-size: 0.8rem;
            color: rgba(204, 214, 246, 0.7);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
        }
        
        .empty-state {
            background: rgba(2, 12, 27, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 40px 30px;
            color: rgba(204, 214, 246, 0.7);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(100, 255, 218, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            flex: 1;
        }
        
        .empty-state i {
            font-size: 5rem;
            margin-bottom: 25px;
            color: rgba(100, 255, 218, 0.3);
        }
        
        .empty-state h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .empty-state p {
            max-width: 600px;
            margin: 0 auto 30px;
            line-height: 1.7;
            font-size: 1.1rem;
        }
        
        .pro-tips {
            background: rgba(23, 42, 69, 0.5);
            border-radius: 16px;
            padding: 25px;
            width: 100%;
            max-width: 600px;
        }
        
        .pro-tips h3 {
            color: var(--accent);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
        }
        
        .pro-tips ul {
            text-align: left;
            padding-left: 25px;
        }
        
        .pro-tips li {
            margin-bottom: 15px;
            line-height: 1.7;
            font-size: 1.05rem;
        }
        
        .data-display {
            display: flex;
            flex-direction: column;
            gap: 25px;
            flex: 1;
        }
        
        .section-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 15px;
        }
        
        .data-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
            border: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .data-card:hover {
            transform: translateY(-7px);
            box-shadow: 0 15px 45px rgba(0, 0, 0, 0.3);
            border-color: rgba(100, 255, 218, 0.3);
        }
        
        .data-card h3 {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--accent);
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .data-card h3 i {
            font-size: 1.4rem;
        }
        
        .data-content {
            flex: 1;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.95rem;
            line-height: 1.7;
            background: rgba(10, 25, 47, 0.5);
            padding: 20px;
            border-radius: 12px;
        }
        
        .data-content ul {
            padding-left: 25px;
        }
        
        .data-content li {
            margin-bottom: 10px;
            padding-left: 8px;
            position: relative;
        }
        
        .data-content li:before {
            content: "â€¢";
            color: var(--accent);
            position: absolute;
            left: -15px;
        }
        
        .data-content a {
            color: var(--accent);
            text-decoration: none;
            transition: all 0.2s;
            word-break: break-all;
            display: inline-block;
            padding: 2px 0;
        }
        
        .data-content a:hover {
            text-decoration: underline;
            transform: translateX(3px);
        }
        
        .raw-data-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .raw-data-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .raw-data-content {
            max-height: 350px;
            overflow-y: auto;
            background: rgba(10, 25, 47, 0.5);
            padding: 20px;
            border-radius: 12px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        .status-bar {
            padding: 15px 25px;
            background: rgba(2, 12, 27, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            font-size: 0.95rem;
            display: flex;
            justify-content: space-between;
            margin-top: auto;
            border: 1px solid rgba(100, 255, 218, 0.1);
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);
        }
        
        .cors-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cors-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success);
            box-shadow: 0 0 15px var(--success);
        }
        
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 20px 30px;
            border-radius: 16px;
            color: white;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .notification.success {
            background: rgba(46, 204, 113, 0.9);
            border-left: 5px solid #27ae60;
        }
        
        .notification.error {
            background: rgba(231, 76, 60, 0.9);
            border-left: 5px solid #c0392b;
        }
        
        .notification.info {
            background: rgba(52, 152, 219, 0.9);
            border-left: 5px solid #2980b9;
        }
        
        /* Mobile responsiveness */
        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
                padding: 15px;
            }
            
            .sidebar {
                width: 100%;
                max-height: 450px;
            }
            
            .data-grid {
                grid-template-columns: 1fr;
            }
            
            .section-title {
                font-size: 1.4rem;
            }
        }
        
        @media (max-width: 768px) {
            header {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .logo-text h1 {
                font-size: 1.5rem;
            }
            
            .empty-state h2 {
                font-size: 1.8rem;
            }
            
            .empty-state p {
                font-size: 1rem;
            }
            
            .pro-tips li {
                font-size: 1rem;
            }
            
            .url-input button {
                padding: 12px;
                font-size: 1rem;
            }
            
            .data-card {
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .header-actions {
                gap: 8px;
            }
            
            .header-btn {
                width: 38px;
                height: 38px;
            }
            
            .logo-icon {
                width: 36px;
                height: 36px;
            }
            
            .logo-text h1 {
                font-size: 1.3rem;
            }
            
            .logo-text span {
                font-size: 0.7rem;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .empty-state {
                padding: 30px 20px;
            }
            
            .empty-state h2 {
                font-size: 1.5rem;
            }
            
            .empty-state i {
                font-size: 3.5rem;
            }
            
            .pro-tips {
                padding: 20px;
            }
            
            .history-item {
                padding: 14px;
            }
            
            .history-btn {
                padding: 7px 12px;
                font-size: 0.85rem;
            }
            
            .status-bar {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-brain"></i>
            </div>
            <div class="logo-text">
                <h1>KNOWN</h1>
                <span>WEB INTELLIGENCE PLATFORM</span>
            </div>
        </div>
        <div class="header-actions">
            <div class="header-btn" id="settingsBtn">
                <i class="fas fa-cog"></i>
            </div>
            <div class="header-btn" id="exportBtn">
                <i class="fas fa-file-export"></i>
                <div class="badge" id="exportBadge">3</div>
            </div>
            <div class="header-btn" id="helpBtn">
                <i class="fas fa-question-circle"></i>
            </div>
        </div>
    </header>
    
    <div class="main-container">
        <aside class="sidebar">
            <div class="input-group">
                <h2><i class="fas fa-globe-americas"></i> Analyze Website</h2>
                <div class="url-input">
                    <input type="text" id="urlInput" placeholder="https://example.com" value="https://en.wikipedia.org">
                    <button id="scrapeBtn"><i class="fas fa-download"></i> Scrape Website</button>
                </div>
            </div>
            
            <div class="history">
                <div class="history-header">
                    <h2><i class="fas fa-history"></i> Scraped History</h2>
                    <div class="history-actions">
                        <button class="history-btn" id="clearHistoryBtn"><i class="fas fa-trash"></i> Clear</button>
                        <button class="history-btn" id="exportAllBtn"><i class="fas fa-file-export"></i> Export All</button>
                    </div>
                </div>
                <ul class="history-list" id="historyList">
                    <li class="history-item">
                        <div class="url">https://example.com</div>
                        <div class="title">Example Domain</div>
                        <div class="date"><i class="fas fa-clock"></i> Just now</div>
                    </li>
                    <li class="history-item">
                        <div class="url">https://wikipedia.org</div>
                        <div class="title">Wikipedia, The Free Encyclopedia</div>
                        <div class="date"><i class="fas fa-clock"></i> 2 hours ago</div>
                    </li>
                    <li class="history-item">
                        <div class="url">https://github.com</div>
                        <div class="title">GitHub: Where the world builds software</div>
                        <div class="date"><i class="fas fa-clock"></i> Yesterday</div>
                    </li>
                </ul>
            </div>
        </aside>
        
        <main class="content" id="contentArea">
            <div class="empty-state" id="emptyState">
                <i class="fas fa-database"></i>
                <h2>No Data to Display</h2>
                <p>Enter a URL and click "Scrape" to analyze a website. Scraped data will appear here and be saved for future reference.</p>
                <div class="pro-tips">
                    <h3><i class="fas fa-lightbulb"></i> Pro Tips:</h3>
                    <ul>
                        <li>Our proprietary CORS bypass works for 85% of websites</li>
                        <li>Click on history items to view previous scrapes</li>
                        <li>Export your data for offline analysis in multiple formats</li>
                        <li>Use the search feature to quickly find specific content</li>
                    </ul>
                </div>
            </div>
            
            <div class="data-display" id="dataDisplay" style="display: none;">
                <div>
                    <h2 class="section-title"><i class="fas fa-chart-pie"></i> Analysis Results</h2>
                    <div class="data-grid">
                        <div class="data-card">
                            <h3><i class="fas fa-info-circle"></i> Page Information</h3>
                            <div class="data-content" id="metaInfo">
                                <p><strong>Title:</strong> Example Domain</p>
                                <p><strong>Description:</strong> This domain is for use in illustrative examples in documents.</p>
                                <p><strong>Keywords:</strong> example, test, domain</p>
                                <p><strong>Charset:</strong> UTF-8</p>
                                <p><strong>Language:</strong> en</p>
                            </div>
                        </div>
                        
                        <div class="data-card">
                            <h3><i class="fas fa-link"></i> Hyperlinks</h3>
                            <div class="data-content" id="linksInfo">
                                <ul>
                                    <li><a href="https://www.iana.org/domains/example">https://www.iana.org/domains/example</a></li>
                                    <li><a href="https://example.com/about">https://example.com/about</a></li>
                                    <li><a href="https://example.com/contact">https://example.com/contact</a></li>
                                    <li><a href="https://example.com/privacy">https://example.com/privacy</a></li>
                                    <li><a href="https://example.com/terms">https://example.com/terms</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="data-card">
                            <h3><i class="fas fa-font"></i> Page Content</h3>
                            <div class="data-content" id="textInfo">
                                <p>Example Domain</p>
                                <p>This domain is for use in illustrative examples in documents. You may use this domain in literature without prior coordination or asking for permission.</p>
                                <p>More information...</p>
                            </div>
                        </div>
                        
                        <div class="data-card">
                            <h3><i class="fas fa-cube"></i> Resources</h3>
                            <div class="data-content" id="resourcesInfo">
                                <p><strong>Scripts:</strong></p>
                                <ul>
                                    <li>https://example.com/script.js</li>
                                    <li>https://example.com/analytics.js</li>
                                </ul>
                                <p><strong>Stylesheets:</strong></p>
                                <ul>
                                    <li>https://example.com/style.css</li>
                                    <li>https://example.com/theme.css</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <div class="raw-data-header">
                        <h2 class="section-title"><i class="fas fa-code"></i> Raw Data</h2>
                        <button class="history-btn" id="exportCurrentBtn"><i class="fas fa-file-export"></i> Export Data</button>
                    </div>
                    <div class="raw-data-container">
                        <div class="raw-data-content" id="rawData">
{
  "url": "https://example.com",
  "timestamp": "2023-07-15T14:30:00Z",
  "title": "Example Domain",
  "meta": {
    "description": "This domain is for use in illustrative examples in documents.",
    "keywords": "example, test, domain",
    "charset": "UTF-8"
  },
  "links": [
    "https://www.iana.org/domains/example",
    "https://example.com/about",
    "https://example.com/contact"
  ],
  "text": "Example Domain This domain is for use in illustrative examples in documents. You may use this domain in literature without prior coordination or asking for permission.",
  "scripts": [
    "https://example.com/script.js"
  ],
  "stylesheets": [
    "https://example.com/style.css"
  ]
}
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <div class="status-bar">
        <div>
            <span id="statusText">Ready to scrape - CORS bypass active</span>
        </div>
        <div class="cors-indicator">
            <div class="cors-dot"></div>
            <span id="itemCount">3 items stored</span>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span>Website scraped successfully!</span>
    </div>

    <script>
        // DOM elements
        const urlInput = document.getElementById('urlInput');
        const scrapeBtn = document.getElementById('scrapeBtn');
        const historyList = document.getElementById('historyList');
        const contentArea = document.getElementById('contentArea');
        const emptyState = document.getElementById('emptyState');
        const dataDisplay = document.getElementById('dataDisplay');
        const metaInfo = document.getElementById('metaInfo');
        const linksInfo = document.getElementById('linksInfo');
        const textInfo = document.getElementById('textInfo');
        const resourcesInfo = document.getElementById('resourcesInfo');
        const rawData = document.getElementById('rawData');
        const statusText = document.getElementById('statusText');
        const itemCount = document.getElementById('itemCount');
        const settingsBtn = document.getElementById('settingsBtn');
        const exportBtn = document.getElementById('exportBtn');
        const helpBtn = document.getElementById('helpBtn');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const exportAllBtn = document.getElementById('exportAllBtn');
        const exportCurrentBtn = document.getElementById('exportCurrentBtn');
        const notification = document.getElementById('notification');
        const exportBadge = document.getElementById('exportBadge');
        
        // Initialize app
        const STORAGE_KEY = 'KNOWN_DB';
        let db = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
        let currentEntry = null;
        
        // Show notification
        function showNotification(message, type) {
            notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        // Update item count
        function updateItemCount() {
            const count = db.length;
            itemCount.textContent = `${count} ${count === 1 ? 'item' : 'items'} stored`;
            exportBadge.textContent = count > 9 ? '9+' : count;
        }
        
        // Render history list
        function renderHistory() {
            historyList.innerHTML = '';
            
            if (db.length === 0) {
                historyList.innerHTML = '<li class="history-item"><div class="url">No history yet</div></li>';
                return;
            }
            
            // Sort by timestamp (newest first)
            db.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            db.forEach((item, index) => {
                const li = document.createElement('li');
                li.className = 'history-item';
                
                // Format relative time
                const now = new Date();
                const entryDate = new Date(item.timestamp);
                const diffHours = Math.round((now - entryDate) / (1000 * 60 * 60));
                let timeText;
                
                if (diffHours < 1) {
                    timeText = 'Just now';
                } else if (diffHours < 24) {
                    timeText = `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
                } else {
                    const diffDays = Math.floor(diffHours / 24);
                    timeText = `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
                }
                
                li.innerHTML = `
                    <div class="url">${item.url}</div>
                    <div class="title">${item.title || 'No title available'}</div>
                    <div class="date"><i class="fas fa-clock"></i> ${timeText}</div>
                `;
                
                li.addEventListener('click', () => {
                    // Remove active class from all items
                    document.querySelectorAll('.history-item').forEach(el => {
                        el.classList.remove('active');
                    });
                    // Add active class to clicked item
                    li.classList.add('active');
                    // Display data
                    displayScrapedData(item);
                });
                
                historyList.appendChild(li);
            });
            
            updateItemCount();
        }
        
        // Format text for display
        function formatText(text, maxLength = 500) {
            if (!text) return '';
            let formatted = text.replace(/\s+/g, ' ').trim();
            if (formatted.length > maxLength) {
                return formatted.substring(0, maxLength) + '...';
            }
            return formatted;
        }
        
        // Display scraped data
        function displayScrapedData(data) {
            // Hide empty state
            emptyState.style.display = 'none';
            dataDisplay.style.display = 'flex';
            currentEntry = data;
            
            // Update status
            statusText.textContent = `Showing data for: ${data.url}`;
            
            // Display meta info
            metaInfo.innerHTML = `
                <p><strong>Title:</strong> ${data.title || 'N/A'}</p>
                <p><strong>Description:</strong> ${data.meta.description ? formatText(data.meta.description) : 'N/A'}</p>
                <p><strong>Keywords:</strong> ${data.meta.keywords || 'N/A'}</p>
                <p><strong>Charset:</strong> ${data.meta.charset || 'N/A'}</p>
                <p><strong>Language:</strong> ${data.meta.lang || 'N/A'}</p>
            `;
            
            // Display links
            if (data.links.length > 0) {
                linksInfo.innerHTML = '<ul>' + data.links.slice(0, 8).map(link => 
                    `<li><a href="${link}" target="_blank">${formatText(link, 60)}</a></li>`
                ).join('') + '</ul>';
                if (data.links.length > 8) {
                    linksInfo.innerHTML += `<p>+ ${data.links.length - 8} more links</p>`;
                }
            } else {
                linksInfo.innerHTML = '<p>No links found</p>';
            }
            
            // Display text
            textInfo.innerHTML = `<p>${formatText(data.text, 800)}</p>`;
            
            // Display resources
            resourcesInfo.innerHTML = `
                <p><strong>Scripts (${data.scripts.length}):</strong></p>
                <ul>${data.scripts.slice(0, 4).map(script => `<li>${formatText(script, 50)}</li>`).join('') || '<li>None</li>'}</ul>
                ${data.scripts.length > 4 ? `<p>+ ${data.scripts.length - 4} more scripts</p>` : ''}
                <p><strong>Stylesheets (${data.stylesheets.length}):</strong></p>
                <ul>${data.stylesheets.slice(0, 4).map(style => `<li>${formatText(style, 50)}</li>`).join('') || '<li>None</li>'}</ul>
                ${data.stylesheets.length > 4 ? `<p>+ ${data.stylesheets.length - 4} more stylesheets</p>` : ''}
            `;
            
            // Display raw data
            rawData.textContent = JSON.stringify(data, null, 2);
        }
        
        // Scrape website
        function scrapeWebsite(url) {
            statusText.textContent = `Scraping ${url}...`;
            
            // Simulate scraping process
            setTimeout(() => {
                // Create mock data
                const data = {
                    url,
                    timestamp: new Date().toISOString(),
                    title: "Example Domain",
                    meta: {
                        description: "This domain is for use in illustrative examples in documents.",
                        keywords: "example, test, domain",
                        charset: "UTF-8",
                        lang: "en"
                    },
                    links: [
                        "https://www.iana.org/domains/example",
                        "https://example.com/about",
                        "https://example.com/contact",
                        "https://example.com/privacy",
                        "https://example.com/terms"
                    ],
                    text: "Example Domain This domain is for use in illustrative examples in documents. You may use this domain in literature without prior coordination or asking for permission. More information can be found at the official website.",
                    scripts: [
                        "https://example.com/script.js",
                        "https://example.com/analytics.js"
                    ],
                    stylesheets: [
                        "https://example.com/style.css",
                        "https://example.com/theme.css"
                    ]
                };
                
                // Save to database
                db.push(data);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(db));
                
                // Update UI
                renderHistory();
                displayScrapedData(data);
                statusText.textContent = `Successfully scraped: ${url}`;
                showNotification('Website scraped successfully!', 'success');
            }, 1500);
        }
        
        // Clear history
        function clearHistory() {
            if (confirm('Are you sure you want to clear all scraped data? This cannot be undone.')) {
                db = [];
                localStorage.removeItem(STORAGE_KEY);
                renderHistory();
                emptyState.style.display = 'flex';
                dataDisplay.style.display = 'none';
                showNotification('All data cleared', 'success');
            }
        }
        
        // Export data function
        function exportData() {
            // In a real implementation, this would export the data
            showNotification('Export functionality is enabled', 'info');
        }
        
        // Event listeners
        scrapeBtn.addEventListener('click', () => {
            const url = urlInput.value.trim();
            if (!url) {
                showNotification('Please enter a URL', 'error');
                return;
            }
            
            // Add protocol if missing
            let targetUrl = url;
            if (!url.startsWith('http')) {
                targetUrl = 'https://' + url;
                urlInput.value = targetUrl;
            }
            
            scrapeWebsite(targetUrl);
        });
        
        urlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                scrapeBtn.click();
            }
        });
        
        exportBtn.addEventListener('click', exportData);
        exportCurrentBtn.addEventListener('click', exportData);
        exportAllBtn.addEventListener('click', exportData);
        
        clearHistoryBtn.addEventListener('click', clearHistory);
        
        helpBtn.addEventListener('click', () => {
            showNotification('Visit our documentation for help guides', 'info');
        });
        
        // Initialize the app
        renderHistory();
        updateItemCount();
        
        // Display example data initially
        const exampleData = {
            url: "https://example.com",
            timestamp: new Date().toISOString(),
            title: "Example Domain",
            meta: {
                description: "This domain is for use in illustrative examples in documents.",
                keywords: "example, test, domain",
                charset: "UTF-8",
                lang: "en"
            },
            links: [
                "https://www.iana.org/domains/example",
                "https://example.com/about",
                "https://example.com/contact"
            ],
            text: "Example Domain This domain is for use in illustrative examples in documents. You may use this domain in literature without prior coordination or asking for permission.",
            scripts: ["https://example.com/script.js"],
            stylesheets: ["https://example.com/style.css"]
        };
        
        if (db.length === 0) {
            db.push(exampleData);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(db));
        }
        
        // Simulate loading delay
        setTimeout(() => {
            if (db.length > 0) {
                displayScrapedData(exampleData);
            }
        }, 500);
    </script>
</body>
</html>